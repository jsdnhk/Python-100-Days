<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			#buttons>button {
				border: none;
				outline: none;
				width: 120px;
				height: 40px;
				font: 22px/40px Arial;
				background-color: red;
				color: white;
			}
		</style>
	</head>
	<body>
		<div id="buttons">
			<button><input type="checkbox">蘋果</button>
			<button><input type="checkbox">香蕉</button>
			<button><input type="checkbox">草莓</button>
			<button><input type="checkbox">藍莓</button>
			<button><input type="checkbox">榴蓮</button>
			<button><input type="checkbox">西瓜</button>
			<button><input type="checkbox">芒果</button>
			<button><input type="checkbox">檸檬</button>
		</div>
		<script>
			var buttons = document.querySelectorAll('#buttons>button');
			for (var i = 0; i < buttons.length; i += 1) {
				buttons[i].firstChild.addEventListener('click', function(evt) {
					var checkbox = evt.target || evt.srcElement;
					if (checkbox.checked) {
						checkbox.parentNode.style.backgroundColor = 'lightseagreen';
					} else {
						checkbox.parentNode.style.backgroundColor = 'red';
					}
					evt.stopPropagation();
				});
				buttons[i].addEventListener('click', function(evt) {
					// 通過事件對象的target屬性可以獲取事件源（誰引發了事件）
					// 但是有的瀏覽器是通過srcElement屬性獲取事件源的
					// 可以通過短路或運算來解決這個兼容性問題
					var button = evt.target || evt.srcElement;
					// 當獲取到一個元素之後可以通過它的屬性來獲取它的父元素、子元素以及兄弟元素
					// parentNode - 父元素
					// firstChild / lastChild / children - 第一個子元素 / 最後一個子元素 / 所有子元素
					// previousSibling / nextSibling - 前一個兄弟元素 / 後一個兄弟元素
					var checkbox = button.firstChild;
					checkbox.checked = !checkbox.checked;
					if (checkbox.checked) {
						button.style.backgroundColor = 'lightseagreen';
					} else {
						button.style.backgroundColor = 'red';
					}
				});
			}
		</script>
	</body>
</html>
